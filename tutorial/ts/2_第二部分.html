<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>教程文档集</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="/tutorial/assets/imgs/logo.png">
    <meta name="description" content="这是FLC的专属个人文档集，哈哈哈~">
    
    <link rel="preload" href="/tutorial/assets/css/0.styles.d1b7a802.css" as="style"><link rel="preload" href="/tutorial/assets/js/app.376ad10f.js" as="script"><link rel="preload" href="/tutorial/assets/js/3.8ea4ef0d.js" as="script"><link rel="preload" href="/tutorial/assets/js/53.2c68231e.js" as="script"><link rel="prefetch" href="/tutorial/assets/js/10.a0d1b724.js"><link rel="prefetch" href="/tutorial/assets/js/11.776f9a04.js"><link rel="prefetch" href="/tutorial/assets/js/12.c4204cfd.js"><link rel="prefetch" href="/tutorial/assets/js/13.a6096edd.js"><link rel="prefetch" href="/tutorial/assets/js/14.076abecf.js"><link rel="prefetch" href="/tutorial/assets/js/15.26ee2e0d.js"><link rel="prefetch" href="/tutorial/assets/js/16.cc3d2e48.js"><link rel="prefetch" href="/tutorial/assets/js/17.211c45bd.js"><link rel="prefetch" href="/tutorial/assets/js/18.3feaccb9.js"><link rel="prefetch" href="/tutorial/assets/js/19.af8051ef.js"><link rel="prefetch" href="/tutorial/assets/js/2.142ad704.js"><link rel="prefetch" href="/tutorial/assets/js/20.a56279a1.js"><link rel="prefetch" href="/tutorial/assets/js/21.8e1dc156.js"><link rel="prefetch" href="/tutorial/assets/js/22.98c44145.js"><link rel="prefetch" href="/tutorial/assets/js/23.a98a8591.js"><link rel="prefetch" href="/tutorial/assets/js/24.3b0cd340.js"><link rel="prefetch" href="/tutorial/assets/js/25.cd81953b.js"><link rel="prefetch" href="/tutorial/assets/js/26.3be30b3e.js"><link rel="prefetch" href="/tutorial/assets/js/27.d0fbea83.js"><link rel="prefetch" href="/tutorial/assets/js/28.00acb009.js"><link rel="prefetch" href="/tutorial/assets/js/29.86837a41.js"><link rel="prefetch" href="/tutorial/assets/js/30.f783b7e1.js"><link rel="prefetch" href="/tutorial/assets/js/31.1d7f56ee.js"><link rel="prefetch" href="/tutorial/assets/js/32.769ac5ff.js"><link rel="prefetch" href="/tutorial/assets/js/33.73dd578a.js"><link rel="prefetch" href="/tutorial/assets/js/34.8641605e.js"><link rel="prefetch" href="/tutorial/assets/js/35.bbee8675.js"><link rel="prefetch" href="/tutorial/assets/js/36.705b1c09.js"><link rel="prefetch" href="/tutorial/assets/js/37.72bf42a5.js"><link rel="prefetch" href="/tutorial/assets/js/38.3ec600b2.js"><link rel="prefetch" href="/tutorial/assets/js/39.e0b6405a.js"><link rel="prefetch" href="/tutorial/assets/js/4.fbbb44d1.js"><link rel="prefetch" href="/tutorial/assets/js/40.18544ff2.js"><link rel="prefetch" href="/tutorial/assets/js/41.428fbc00.js"><link rel="prefetch" href="/tutorial/assets/js/42.252d05ef.js"><link rel="prefetch" href="/tutorial/assets/js/43.8a6652b1.js"><link rel="prefetch" href="/tutorial/assets/js/44.b6657a09.js"><link rel="prefetch" href="/tutorial/assets/js/45.d1996489.js"><link rel="prefetch" href="/tutorial/assets/js/46.e8e946b4.js"><link rel="prefetch" href="/tutorial/assets/js/47.e83322fc.js"><link rel="prefetch" href="/tutorial/assets/js/48.95671c4b.js"><link rel="prefetch" href="/tutorial/assets/js/49.814f885f.js"><link rel="prefetch" href="/tutorial/assets/js/5.4969a66a.js"><link rel="prefetch" href="/tutorial/assets/js/50.21e2861f.js"><link rel="prefetch" href="/tutorial/assets/js/51.7e5e60c6.js"><link rel="prefetch" href="/tutorial/assets/js/52.d1516f67.js"><link rel="prefetch" href="/tutorial/assets/js/54.62fae837.js"><link rel="prefetch" href="/tutorial/assets/js/6.940dad7c.js"><link rel="prefetch" href="/tutorial/assets/js/7.74e535ad.js"><link rel="prefetch" href="/tutorial/assets/js/8.37e6deed.js"><link rel="prefetch" href="/tutorial/assets/js/9.3b1d2c8e.js">
    <link rel="stylesheet" href="/tutorial/assets/css/0.styles.d1b7a802.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/tutorial/" class="home-link router-link-active"><!----> <span class="site-name">教程文档集</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/tutorial/git/" class="nav-link">
  Git教程
</a></div><div class="nav-item"><a href="/tutorial/interview/" class="nav-link">
  面试题
</a></div><div class="nav-item"><a href="/tutorial/jquery/" class="nav-link">
  Jquery教程
</a></div><div class="nav-item"><a href="/tutorial/markdown/" class="nav-link">
  Markdown教程
</a></div><div class="nav-item"><a href="/tutorial/note/" class="nav-link">
  杂记
</a></div><div class="nav-item"><a href="/tutorial/regexp/" class="nav-link">
  regexp教程
</a></div><div class="nav-item"><a href="/tutorial/ts/" class="nav-link router-link-active">
  TypeScript基础
</a></div> <a href="https://gitee.com/fanlichuan/node-crawler" target="_blank" rel="noopener noreferrer" class="repo-link">
    Gitee
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/tutorial/git/" class="nav-link">
  Git教程
</a></div><div class="nav-item"><a href="/tutorial/interview/" class="nav-link">
  面试题
</a></div><div class="nav-item"><a href="/tutorial/jquery/" class="nav-link">
  Jquery教程
</a></div><div class="nav-item"><a href="/tutorial/markdown/" class="nav-link">
  Markdown教程
</a></div><div class="nav-item"><a href="/tutorial/note/" class="nav-link">
  杂记
</a></div><div class="nav-item"><a href="/tutorial/regexp/" class="nav-link">
  regexp教程
</a></div><div class="nav-item"><a href="/tutorial/ts/" class="nav-link router-link-active">
  TypeScript基础
</a></div> <a href="https://gitee.com/fanlichuan/node-crawler" target="_blank" rel="noopener noreferrer" class="repo-link">
    Gitee
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/tutorial/ts/" aria-current="page" class="sidebar-link">基础</a></li><li><a href="/tutorial/ts/1_第一部分.html" class="sidebar-link">1 第一部分</a></li><li><a href="/tutorial/ts/2_第二部分.html" class="active sidebar-link">2 第二部分</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/tutorial/ts/2_第二部分.html#一-typeof类型保护" class="sidebar-link">一.typeof类型保护</a></li><li class="sidebar-sub-header"><a href="/tutorial/ts/2_第二部分.html#二-instanceof类型保护" class="sidebar-link">二.instanceof类型保护</a></li><li class="sidebar-sub-header"><a href="/tutorial/ts/2_第二部分.html#三-in类型保护" class="sidebar-link">三.in类型保护</a></li><li class="sidebar-sub-header"><a href="/tutorial/ts/2_第二部分.html#四-可辨识联合类型" class="sidebar-link">四.可辨识联合类型</a></li><li class="sidebar-sub-header"><a href="/tutorial/ts/2_第二部分.html#五-null保护" class="sidebar-link">五.null保护</a></li><li class="sidebar-sub-header"><a href="/tutorial/ts/2_第二部分.html#六-自定义类型保护" class="sidebar-link">六.自定义类型保护</a></li><li class="sidebar-sub-header"><a href="/tutorial/ts/2_第二部分.html#七-完整性保护" class="sidebar-link">七.完整性保护</a></li><li class="sidebar-sub-header"><a href="/tutorial/ts/2_第二部分.html#一-赋值推断" class="sidebar-link">一.赋值推断</a></li><li class="sidebar-sub-header"><a href="/tutorial/ts/2_第二部分.html#二-返回值推断" class="sidebar-link">二.返回值推断</a></li><li class="sidebar-sub-header"><a href="/tutorial/ts/2_第二部分.html#三-函数推断" class="sidebar-link">三.函数推断</a></li><li class="sidebar-sub-header"><a href="/tutorial/ts/2_第二部分.html#四-属性推断" class="sidebar-link">四.属性推断</a></li><li class="sidebar-sub-header"><a href="/tutorial/ts/2_第二部分.html#五-类型反推" class="sidebar-link">五.类型反推</a></li><li class="sidebar-sub-header"><a href="/tutorial/ts/2_第二部分.html#六-索引访问操作符" class="sidebar-link">六.索引访问操作符</a></li><li class="sidebar-sub-header"><a href="/tutorial/ts/2_第二部分.html#七-类型映射" class="sidebar-link">七.类型映射</a></li><li class="sidebar-sub-header"><a href="/tutorial/ts/2_第二部分.html#一-条件类型基本使用" class="sidebar-link">一.条件类型基本使用</a></li><li class="sidebar-sub-header"><a href="/tutorial/ts/2_第二部分.html#二-条件类型分发" class="sidebar-link">二.条件类型分发</a></li><li class="sidebar-sub-header"><a href="/tutorial/ts/2_第二部分.html#三-内置条件类型" class="sidebar-link">三.内置条件类型</a></li><li class="sidebar-sub-header"><a href="/tutorial/ts/2_第二部分.html#四-infer类型推断" class="sidebar-link">四.infer类型推断</a></li><li class="sidebar-sub-header"><a href="/tutorial/ts/2_第二部分.html#五-infer实践" class="sidebar-link">五.infer实践</a></li><li class="sidebar-sub-header"><a href="/tutorial/ts/2_第二部分.html#一-partial转化可选属性" class="sidebar-link">一.Partial转化可选属性</a></li><li class="sidebar-sub-header"><a href="/tutorial/ts/2_第二部分.html#二-required转化必填属性" class="sidebar-link">二.Required转化必填属性</a></li><li class="sidebar-sub-header"><a href="/tutorial/ts/2_第二部分.html#三-readonly转化仅读属性" class="sidebar-link">三.Readonly转化仅读属性</a></li><li class="sidebar-sub-header"><a href="/tutorial/ts/2_第二部分.html#四-pick挑选所需的属性" class="sidebar-link">四.Pick挑选所需的属性</a></li><li class="sidebar-sub-header"><a href="/tutorial/ts/2_第二部分.html#五-record记录类型" class="sidebar-link">五.Record记录类型</a></li><li class="sidebar-sub-header"><a href="/tutorial/ts/2_第二部分.html#六-omit忽略属性" class="sidebar-link">六.Omit忽略属性</a></li><li class="sidebar-sub-header"><a href="/tutorial/ts/2_第二部分.html#一-装包" class="sidebar-link">一.装包</a></li><li class="sidebar-sub-header"><a href="/tutorial/ts/2_第二部分.html#二-拆包" class="sidebar-link">二.拆包</a></li><li class="sidebar-sub-header"><a href="/tutorial/ts/2_第二部分.html#一-diff实现" class="sidebar-link">一.Diff实现</a></li><li class="sidebar-sub-header"><a href="/tutorial/ts/2_第二部分.html#二-intersection交集" class="sidebar-link">二.InterSection交集</a></li><li class="sidebar-sub-header"><a href="/tutorial/ts/2_第二部分.html#三-overwrite属性覆盖" class="sidebar-link">三.Overwrite属性覆盖</a></li><li class="sidebar-sub-header"><a href="/tutorial/ts/2_第二部分.html#四-merge对象合并" class="sidebar-link">四.Merge对象合并</a></li><li class="sidebar-sub-header"><a href="/tutorial/ts/2_第二部分.html#一-unknown类型" class="sidebar-link">一.unknown类型</a></li><li class="sidebar-sub-header"><a href="/tutorial/ts/2_第二部分.html#二-unknown特性" class="sidebar-link">二.unknown特性</a></li><li class="sidebar-sub-header"><a href="/tutorial/ts/2_第二部分.html#一-模块" class="sidebar-link">一.模块</a></li><li class="sidebar-sub-header"><a href="/tutorial/ts/2_第二部分.html#二-命名空间" class="sidebar-link">二.命名空间</a></li><li class="sidebar-sub-header"><a href="/tutorial/ts/2_第二部分.html#一-声明全局变量" class="sidebar-link">一.声明全局变量</a></li><li class="sidebar-sub-header"><a href="/tutorial/ts/2_第二部分.html#二-类型声明文件" class="sidebar-link">二. 类型声明文件</a></li><li class="sidebar-sub-header"><a href="/tutorial/ts/2_第二部分.html#三-编写第三方声明文件" class="sidebar-link">三.编写第三方声明文件</a></li><li class="sidebar-sub-header"><a href="/tutorial/ts/2_第二部分.html#四-模块导入导出" class="sidebar-link">四.模块导入导出</a></li><li class="sidebar-sub-header"><a href="/tutorial/ts/2_第二部分.html#五-第三方声明文件" class="sidebar-link">五.第三方声明文件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/tutorial/ts/2_第二部分.html#查找规范" class="sidebar-link">查找规范</a></li></ul></li><li class="sidebar-sub-header"><a href="/tutorial/ts/2_第二部分.html#一-扩展局部变量" class="sidebar-link">一.扩展局部变量</a></li><li class="sidebar-sub-header"><a href="/tutorial/ts/2_第二部分.html#二-模块内全局扩展" class="sidebar-link">二.模块内全局扩展</a></li><li class="sidebar-sub-header"><a href="/tutorial/ts/2_第二部分.html#三-声明合并" class="sidebar-link">三.声明合并</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/tutorial/ts/2_第二部分.html#_1-同名接口合并" class="sidebar-link">1.同名接口合并</a></li></ul></li><li class="sidebar-sub-header"><a href="/tutorial/ts/2_第二部分.html#_2-命名空间的合并" class="sidebar-link">2.命名空间的合并</a></li><li class="sidebar-sub-header"><a href="/tutorial/ts/2_第二部分.html#_3-交叉类型合并" class="sidebar-link">3.交叉类型合并</a></li><li class="sidebar-sub-header"><a href="/tutorial/ts/2_第二部分.html#四-生成声明文件" class="sidebar-link">四.生成声明文件</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p>承接上篇 <a href="https://juejin.cn/post/7102384712504573982" title="https://juejin.cn/post/7102384712504573982" target="_blank" rel="noopener noreferrer">[ 万字总结 ] 夯实你的 TypeScript 基础！（一）<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h1 id="_9-类型保护"><a href="#_9-类型保护" class="header-anchor">#</a> 9.类型保护</h1> <p>通过判断识别所执行的代码块，自动识别变量属性和方法</p> <h2 id="一-typeof类型保护"><a href="#一-typeof类型保护" class="header-anchor">#</a> 一.<code>typeof</code>类型保护</h2> <div class="language-kotlin extra-class"><pre class="language-kotlin"><code>function <span class="token function">double</span><span class="token punctuation">(</span><span class="token keyword">val</span><span class="token operator">:</span> number | string<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>typeof <span class="token keyword">val</span> <span class="token operator">===</span> 'number'<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">val</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">val</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
复制代码
</code></pre></div><h2 id="二-instanceof类型保护"><a href="#二-instanceof类型保护" class="header-anchor">#</a> 二.<code>instanceof</code>类型保护</h2> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Cat</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">getInstance</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">clazz</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token keyword">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Cat <span class="token operator">|</span> Dog <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">clazz</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> r <span class="token operator">=</span> <span class="token function">getInstance</span><span class="token punctuation">(</span>Cat<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>r <span class="token keyword">instanceof</span> <span class="token class-name">Cat</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    r
<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
    r
<span class="token punctuation">}</span>
复制代码
</code></pre></div><h2 id="三-in类型保护"><a href="#三-in类型保护" class="header-anchor">#</a> 三.<code>in</code>类型保护</h2> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">interface</span> <span class="token class-name-definition class-name">Fish</span> <span class="token punctuation">{</span>
    swiming<span class="token punctuation">:</span> <span class="token keyword type-declaration">string</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name-definition class-name">Bird</span> <span class="token punctuation">{</span>
    fly<span class="token punctuation">:</span> <span class="token keyword type-declaration">string</span><span class="token punctuation">,</span>
    <span class="token argument-name">leg</span><span class="token punctuation">:</span> number
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function-definition function">getType</span><span class="token punctuation">(</span><span class="token argument-name">animal</span><span class="token punctuation">:</span> <span class="token class-name">Fish</span> <span class="token operator">|</span> <span class="token class-name">Bird</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string single-quoted-string">'swiming'</span> in animal<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        animal <span class="token comment">// Fish</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        animal <span class="token comment">// Bird</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
复制代码
</code></pre></div><h2 id="四-可辨识联合类型"><a href="#四-可辨识联合类型" class="header-anchor">#</a> 四.可辨识联合类型</h2> <div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token keyword">interface</span> WarningButton <span class="token punctuation">{</span>
    <span class="token keyword">class</span><span class="token operator">:</span> 'warning'
<span class="token punctuation">}</span>
<span class="token keyword">interface</span> DangerButton <span class="token punctuation">{</span>
    <span class="token keyword">class</span><span class="token operator">:</span> 'danger'
<span class="token punctuation">}</span>
function <span class="token function">createButton</span><span class="token punctuation">(</span>button<span class="token operator">:</span> WarningButton | DangerButton<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>button<span class="token punctuation">.</span>class <span class="token operator">==</span> 'warning'<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        button <span class="token comment">// WarningButton</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        button <span class="token comment">// DangerButton</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
复制代码
</code></pre></div><h2 id="五-null保护"><a href="#五-null保护" class="header-anchor">#</a> 五.null保护</h2> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">const</span> <span class="token function-variable function">addPrefix</span> <span class="token operator">=</span> <span class="token punctuation">(</span>num<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    num <span class="token operator">=</span> num <span class="token operator">||</span> <span class="token number">1.1</span><span class="token punctuation">;</span>
    <span class="token keyword">function</span> <span class="token function">prefix</span><span class="token punctuation">(</span>fix<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> fix <span class="token operator">+</span> num<span class="token operator">?.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token function">prefix</span><span class="token punctuation">(</span><span class="token string">'zf'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">addPrefix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
复制代码
</code></pre></div><blockquote><p>这里要注意的是ts无法检测内部函数变量类型</p></blockquote> <h2 id="六-自定义类型保护"><a href="#六-自定义类型保护" class="header-anchor">#</a> 六.自定义类型保护</h2> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">interface</span> <span class="token class-name-definition class-name">Fish</span> <span class="token punctuation">{</span>
    swiming<span class="token punctuation">:</span> <span class="token keyword type-declaration">string</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name-definition class-name">Bird</span> <span class="token punctuation">{</span>
    fly<span class="token punctuation">:</span> <span class="token keyword type-declaration">string</span><span class="token punctuation">,</span>
    <span class="token argument-name">leg</span><span class="token punctuation">:</span> number
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function-definition function">isBird</span><span class="token punctuation">(</span><span class="token argument-name">animal</span><span class="token punctuation">:</span> <span class="token class-name">Fish</span> <span class="token operator">|</span> <span class="token class-name">Bird</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token class-name return-type">animal</span> is Bird <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string single-quoted-string">'swiming'</span> in animal
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function-definition function">getAniaml</span> <span class="token punctuation">(</span><span class="token argument-name">animal</span><span class="token punctuation">:</span><span class="token class-name">Fish</span> <span class="token operator">|</span> <span class="token class-name">Bird</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isBird</span><span class="token punctuation">(</span>animal<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        animal
    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
        animal
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
复制代码
</code></pre></div><h2 id="七-完整性保护"><a href="#七-完整性保护" class="header-anchor">#</a> 七.完整性保护</h2> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">ICircle</span> <span class="token punctuation">{</span>
    kind<span class="token operator">:</span> <span class="token string">'circle'</span><span class="token punctuation">,</span>
    r<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name">IRant</span> <span class="token punctuation">{</span>
    kind<span class="token operator">:</span> <span class="token string">'rant'</span><span class="token punctuation">,</span>
    width<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
    height<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name">ISquare</span> <span class="token punctuation">{</span>
    kind<span class="token operator">:</span> <span class="token string">'square'</span><span class="token punctuation">,</span>
    width<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> <span class="token class-name">Area</span> <span class="token operator">=</span> ICircle <span class="token operator">|</span> IRant <span class="token operator">|</span> ISquare
<span class="token keyword">const</span> <span class="token function-variable function">isAssertion</span> <span class="token operator">=</span> <span class="token punctuation">(</span>obj<span class="token operator">:</span> <span class="token builtin">never</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
<span class="token keyword">const</span> <span class="token function-variable function">getArea</span> <span class="token operator">=</span> <span class="token punctuation">(</span>obj<span class="token operator">:</span> Area<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>obj<span class="token punctuation">.</span>kind<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> <span class="token string">'circle'</span><span class="token operator">:</span>
            <span class="token keyword">return</span> <span class="token number">3.14</span> <span class="token operator">*</span> obj<span class="token punctuation">.</span>r <span class="token operator">**</span> <span class="token number">2</span>
        <span class="token keyword">default</span><span class="token operator">:</span>
            <span class="token keyword">return</span> <span class="token function">isAssertion</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 必须实现所有逻辑</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
复制代码
</code></pre></div><h1 id="_10-类型推断"><a href="#_10-类型推断" class="header-anchor">#</a> 10.类型推断</h1> <h2 id="一-赋值推断"><a href="#一-赋值推断" class="header-anchor">#</a> 一.赋值推断</h2> <p>赋值时推断，类型从右像左流动,会根据赋值推断出变量类型</p> <div class="language-ini extra-class"><pre class="language-ini"><code><span class="token key attr-name">let str</span> <span class="token punctuation">=</span> <span class="token value attr-value">'wj';</span>
<span class="token key attr-name">let age</span> <span class="token punctuation">=</span> <span class="token value attr-value">11;</span>
<span class="token key attr-name">let boolean</span> <span class="token punctuation">=</span> <span class="token value attr-value">true;</span>
复制代码
</code></pre></div><h2 id="二-返回值推断"><a href="#二-返回值推断" class="header-anchor">#</a> 二.返回值推断</h2> <p>自动推断函数返回值类型</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">function</span> <span class="token function-definition function">sum</span><span class="token punctuation">(</span><span class="token argument-name">a</span><span class="token punctuation">:</span> <span class="token keyword type-declaration">string</span><span class="token punctuation">,</span> <span class="token argument-name">b</span><span class="token punctuation">:</span> <span class="token keyword type-declaration">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">sum</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'a'</span><span class="token punctuation">,</span><span class="token string single-quoted-string">'b'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
复制代码
</code></pre></div><h2 id="三-函数推断"><a href="#三-函数推断" class="header-anchor">#</a> 三.函数推断</h2> <p>函数从左到右进行推断</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">Sum</span> <span class="token operator">=</span> <span class="token punctuation">(</span>a<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> b<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> sum<span class="token operator">:</span> <span class="token function-variable function">Sum</span> <span class="token operator">=</span> <span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
复制代码
</code></pre></div><h2 id="四-属性推断"><a href="#四-属性推断" class="header-anchor">#</a> 四.属性推断</h2> <p>可以通过属性值,推断出属性的类型</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">let</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
    name:<span class="token string">'zf'</span>,
    age:11
<span class="token punctuation">}</span>
<span class="token builtin class-name">let</span> <span class="token punctuation">{</span>name,age<span class="token punctuation">}</span> <span class="token operator">=</span> person<span class="token punctuation">;</span>
复制代码
</code></pre></div><h2 id="五-类型反推"><a href="#五-类型反推" class="header-anchor">#</a> 五.类型反推</h2> <p>可以使用<code>typeof</code>关键字反推变量类型</p> <div class="language-ini extra-class"><pre class="language-ini"><code><span class="token key attr-name">let person</span> <span class="token punctuation">=</span> <span class="token value attr-value">{</span>
    name:'zf',
    age:11
}
<span class="token key attr-name">type Person</span> <span class="token punctuation">=</span> <span class="token value attr-value">typeof person</span>
复制代码
</code></pre></div><h2 id="六-索引访问操作符"><a href="#六-索引访问操作符" class="header-anchor">#</a> 六.索引访问操作符</h2> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">IPerson</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">,</span>
    age<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">,</span>
    job<span class="token operator">:</span><span class="token punctuation">{</span>
        address<span class="token operator">:</span><span class="token builtin">string</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> <span class="token class-name">job</span> <span class="token operator">=</span> IPerson<span class="token punctuation">[</span><span class="token string">'job'</span><span class="token punctuation">]</span>
复制代码
</code></pre></div><h2 id="七-类型映射"><a href="#七-类型映射" class="header-anchor">#</a> 七.类型映射</h2> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">IPerson</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">,</span>
    age<span class="token operator">:</span><span class="token builtin">number</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> <span class="token class-name">MapPerson</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">[</span>key <span class="token keyword">in</span> <span class="token keyword">keyof</span> IPerson<span class="token punctuation">]</span><span class="token operator">:</span>IPerson<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">}</span>
复制代码
</code></pre></div><h1 id="_11-交叉类型"><a href="#_11-交叉类型" class="header-anchor">#</a> 11.交叉类型</h1> <p>交叉类型(Intersection Types)是将多个类型合并为一个类型</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Person1</span> <span class="token punctuation">{</span>
    handsome<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name">Person2</span> <span class="token punctuation">{</span>
    high<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">P1P2</span></span> <span class="token operator">=</span> Person1 <span class="token operator">&amp;</span> Person2<span class="token punctuation">;</span>
<span class="token keyword">let</span> p<span class="token operator">:</span> <span class="token constant">P1P2</span> <span class="token operator">=</span> <span class="token punctuation">{</span> handsome<span class="token operator">:</span> <span class="token string">'帅'</span><span class="token punctuation">,</span> high<span class="token operator">:</span> <span class="token string">'高'</span> <span class="token punctuation">}</span>
复制代码
</code></pre></div><blockquote><p>举例：我们提供两拨人，一拨人都很帅、另一拨人很高。我们希望找到他们的交叉部分 =&gt; 又高又帅的人</p></blockquote> <ul><li>交叉类型</li></ul> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">function</span> mixin<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">K</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token argument-name">a</span><span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> <span class="token argument-name">b</span><span class="token punctuation">:</span> <span class="token constant">K</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name return-type">T</span> <span class="token operator">&amp;</span> <span class="token constant">K</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token operator">...</span>a<span class="token punctuation">,</span> <span class="token operator">...</span>b <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> <span class="token constant">x</span> <span class="token operator">=</span> <span class="token function">mixin</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string single-quoted-string">'zf'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> age<span class="token punctuation">:</span> <span class="token number">11</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
复制代码
</code></pre></div><div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">IPerson1</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">,</span>
    age<span class="token operator">:</span><span class="token builtin">number</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">IPerson2</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span><span class="token builtin">number</span>
    age<span class="token operator">:</span><span class="token builtin">number</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> <span class="token class-name">person</span> <span class="token operator">=</span> IPerson1 <span class="token operator">&amp;</span> IPerson2
<span class="token keyword">let</span> name<span class="token operator">!</span><span class="token operator">:</span><span class="token builtin">never</span>
<span class="token keyword">let</span> person<span class="token operator">:</span>person <span class="token operator">=</span> <span class="token punctuation">{</span>name<span class="token punctuation">,</span>age<span class="token operator">:</span><span class="token number">11</span><span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token comment">// 两个属性之间 string &amp; number的值为never</span>
复制代码
</code></pre></div><h1 id="_12-条件类型"><a href="#_12-条件类型" class="header-anchor">#</a> 12.条件类型</h1> <h2 id="一-条件类型基本使用"><a href="#一-条件类型基本使用" class="header-anchor">#</a> 一.条件类型基本使用</h2> <p>可以使用<code>extends</code>关键字和三元表达式，实现条件判断</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Fish</span> <span class="token punctuation">{</span>
    name1<span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name">Water</span> <span class="token punctuation">{</span>
    name2<span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name">Bird</span> <span class="token punctuation">{</span>
    name3<span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name">Sky</span> <span class="token punctuation">{</span>
    name4<span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> <span class="token class-name">Condition</span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">Fish</span> <span class="token operator">?</span> Water <span class="token operator">:</span> Sky<span class="token punctuation">;</span>
<span class="token keyword">let</span> con1<span class="token operator">:</span> Condition<span class="token operator">&lt;</span>Fish<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span> name2<span class="token operator">:</span> <span class="token string">'水'</span> <span class="token punctuation">}</span>
复制代码
</code></pre></div><h2 id="二-条件类型分发"><a href="#二-条件类型分发" class="header-anchor">#</a> 二.条件类型分发</h2> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">let con2: Condition =</span> <span class="token punctuation">{</span> <span class="token property">name2</span><span class="token punctuation">:</span> <span class="token string">'水'</span> <span class="token punctuation">}</span> 
复制代码
</code></pre></div><blockquote><p>这里会用每一项依次进行分发,最终采用联合类型作为结果,等价于:</p></blockquote> <div class="language-ini extra-class"><pre class="language-ini"><code><span class="token key attr-name">type c1</span> <span class="token punctuation">=</span> <span class="token value attr-value">Condition;</span>
<span class="token key attr-name">type c2</span> <span class="token punctuation">=</span> <span class="token value attr-value">Condition;</span>
<span class="token key attr-name">type c</span> <span class="token punctuation">=</span> <span class="token value attr-value">c1 | c2</span>
复制代码
</code></pre></div><h2 id="三-内置条件类型"><a href="#三-内置条件类型" class="header-anchor">#</a> 三.内置条件类型</h2> <ul><li>1.<code>Exclude</code>排除类型</li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">Exclude</span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">U</span></span> <span class="token operator">?</span> <span class="token builtin">never</span> <span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name">MyExclude</span> <span class="token operator">=</span> Exclude<span class="token operator">&lt;</span><span class="token string">'1'</span> <span class="token operator">|</span> <span class="token string">'2'</span> <span class="token operator">|</span> <span class="token string">'3'</span><span class="token punctuation">,</span> <span class="token string">'1'</span> <span class="token operator">|</span> <span class="token string">'2'</span><span class="token operator">&gt;</span>
复制代码
</code></pre></div><ul><li>2.<code>Extract</code>抽取类型</li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">Extract</span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">U</span></span> <span class="token operator">?</span> <span class="token constant">T</span> <span class="token operator">:</span> <span class="token builtin">never</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name">MyExtract</span> <span class="token operator">=</span> Extract<span class="token operator">&lt;</span><span class="token string">'1'</span> <span class="token operator">|</span> <span class="token string">'2'</span> <span class="token operator">|</span> <span class="token string">'3'</span><span class="token punctuation">,</span> <span class="token string">'1'</span> <span class="token operator">|</span> <span class="token string">'2'</span><span class="token operator">&gt;</span>
复制代码
</code></pre></div><ul><li>3.<code>NoNullable</code> 非空检测</li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">NonNullable</span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token keyword">null</span></span> <span class="token operator">|</span> <span class="token keyword">undefined</span> <span class="token operator">?</span> <span class="token builtin">never</span> <span class="token operator">:</span> <span class="token constant">T</span>
<span class="token keyword">type</span> <span class="token class-name">MyNone</span> <span class="token operator">=</span> NonNullable<span class="token operator">&lt;</span><span class="token string">'a'</span> <span class="token operator">|</span> <span class="token keyword">null</span> <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token operator">&gt;</span>
复制代码
</code></pre></div><h2 id="四-infer类型推断"><a href="#四-infer类型推断" class="header-anchor">#</a> 四.infer类型推断</h2> <ul><li>1.<code>ReturnType</code>返回值类型</li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">getUser</span><span class="token punctuation">(</span>a<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> b<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">'zf'</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">10</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> <span class="token class-name">ReturnType</span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">infer</span> <span class="token constant">R</span> <span class="token operator">?</span> <span class="token constant">R</span> <span class="token operator">:</span> <span class="token builtin">never</span>
<span class="token keyword">type</span> <span class="token class-name">MyReturn</span> <span class="token operator">=</span> ReturnType<span class="token operator">&lt;</span><span class="token keyword">typeof</span> getUser<span class="token operator">&gt;</span>
复制代码
</code></pre></div><ul><li>2.<code>Parameters</code> 参数类型</li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">Parameters</span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token operator">:</span> <span class="token keyword">infer</span> <span class="token constant">R</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">any</span> <span class="token operator">?</span> <span class="token constant">R</span> <span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name">MyParams</span> <span class="token operator">=</span> Parameters<span class="token operator">&lt;</span><span class="token keyword">typeof</span> getUser<span class="token operator">&gt;</span><span class="token punctuation">;</span>
复制代码
</code></pre></div><ul><li>3.<code>ConstructorParameters</code>构造函数参数类型</li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> <span class="token class-name">ConstructorParameters</span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">{</span> <span class="token keyword">new</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token operator">:</span> <span class="token keyword">infer</span> <span class="token constant">R</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">any</span> <span class="token punctuation">}</span> <span class="token operator">?</span> <span class="token constant">R</span> <span class="token operator">:</span> <span class="token builtin">never</span>
<span class="token keyword">type</span> <span class="token class-name">MyConstructor</span> <span class="token operator">=</span> ConstructorParameters<span class="token operator">&lt;</span><span class="token keyword">typeof</span> Person<span class="token operator">&gt;</span>
复制代码
</code></pre></div><ul><li>4.<code>InstanceType</code> 实例类型</li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">InstanceType</span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">{</span> <span class="token keyword">new</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">infer</span> <span class="token constant">R</span> <span class="token punctuation">}</span> <span class="token operator">?</span> <span class="token constant">R</span> <span class="token operator">:</span> <span class="token builtin">any</span>
<span class="token keyword">type</span> <span class="token class-name">MyInstance</span> <span class="token operator">=</span> InstanceType<span class="token operator">&lt;</span><span class="token keyword">typeof</span> Person<span class="token operator">&gt;</span>
复制代码
</code></pre></div><h2 id="五-infer实践"><a href="#五-infer实践" class="header-anchor">#</a> 五.infer实践</h2> <p>将数组类型转化为联合类型</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">ElementOf</span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">Array</span></span> <span class="token operator">?</span> <span class="token constant">E</span> <span class="token operator">:</span> <span class="token builtin">never</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name">TupleToUnion</span> <span class="token operator">=</span> ElementOf<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">boolean</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
复制代码
</code></pre></div><p>将两个函数的参数转化为交叉类型</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T1</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T2</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span> age<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name">ToIntersection</span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token keyword">infer</span> <span class="token constant">U</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">any</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token keyword">infer</span> <span class="token constant">U</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">any</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token constant">U</span> <span class="token operator">:</span> <span class="token builtin">never</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name">t3</span> <span class="token operator">=</span> ToIntersection<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token punctuation">(</span>x<span class="token operator">:</span><span class="token constant">T1</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token builtin">any</span><span class="token punctuation">,</span><span class="token punctuation">(</span>x<span class="token operator">:</span><span class="token constant">T2</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token builtin">any</span><span class="token punctuation">]</span><span class="token operator">&gt;</span>
复制代码
</code></pre></div><blockquote><p>表示要把<code>T1</code>、<code>T2</code>赋予给x，那么x的值就是<code>T1</code>、<code>T2</code>的交集。（参数是逆变的可以传父类）</p></blockquote> <blockquote><p>TS的类型：TS主要是为了代码的安全性来考虑。所以所有的兼容性问题都要从安全性来考虑!</p></blockquote> <h1 id="_13-内置类型"><a href="#_13-内置类型" class="header-anchor">#</a> 13.内置类型</h1> <h2 id="一-partial转化可选属性"><a href="#一-partial转化可选属性" class="header-anchor">#</a> 一.Partial转化可选属性</h2> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Company</span> <span class="token punctuation">{</span>
    num<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
    company<span class="token operator">:</span> Company
<span class="token punctuation">}</span>
<span class="token comment">// type Partial = { [K in keyof T]?: T[K] }; 实现原理</span>
<span class="token keyword">type</span> <span class="token class-name">PartialPerson</span> <span class="token operator">=</span> Partial<span class="token operator">&lt;</span>Person<span class="token operator">&gt;</span><span class="token punctuation">;</span>
复制代码
</code></pre></div><blockquote><p>遍历所有的属性将属性设置为可选属性,但是无法实现深度转化!</p></blockquote> <div class="language-ini extra-class"><pre class="language-ini"><code><span class="token key attr-name">type DeepPartial</span> <span class="token punctuation">=</span> <span class="token value attr-value">{</span>
    <span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">K in keyof T</span><span class="token punctuation">]</span></span>?: T[K] extends object ? DeepPartial[K]&gt; : T[K]
}
<span class="token key attr-name">type DeepPartialPerson</span> <span class="token punctuation">=</span> <span class="token value attr-value">DeepPartial;</span>
复制代码
</code></pre></div><blockquote><p>我们可以实现深度转化,如果值是对象继续深度转化。</p></blockquote> <h2 id="二-required转化必填属性"><a href="#二-required转化必填属性" class="header-anchor">#</a> 二.Required转化必填属性</h2> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Company</span> <span class="token punctuation">{</span>
    num<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
    company<span class="token operator">:</span> Company
<span class="token punctuation">}</span>
<span class="token keyword">type</span> <span class="token class-name">PartialPerson</span> <span class="token operator">=</span> Partial<span class="token operator">&lt;</span>Person<span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name">Required</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">[</span><span class="token constant">K</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">-</span><span class="token operator">?</span><span class="token operator">:</span><span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">K</span><span class="token punctuation">]</span><span class="token punctuation">}</span> 
<span class="token keyword">type</span> <span class="token class-name">RequiredPerson</span> <span class="token operator">=</span> Required<span class="token operator">&lt;</span>PartialPerson<span class="token operator">&gt;</span>
复制代码
</code></pre></div><blockquote><p>将所有的属性转化成必填属性</p></blockquote> <h2 id="三-readonly转化仅读属性"><a href="#三-readonly转化仅读属性" class="header-anchor">#</a> 三.Readonly转化仅读属性</h2> <div class="language-ini extra-class"><pre class="language-ini"><code><span class="token key attr-name">type Readonly</span> <span class="token punctuation">=</span> <span class="token value attr-value">{ readonly [K in keyof T]: T[K] }</span>
<span class="token key attr-name">type RequiredPerson</span> <span class="token punctuation">=</span> <span class="token value attr-value">Readonly</span>
复制代码
</code></pre></div><blockquote><p>将所有属性变为仅读状态</p></blockquote> <h2 id="四-pick挑选所需的属性"><a href="#四-pick挑选所需的属性" class="header-anchor">#</a> 四.Pick挑选所需的属性</h2> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">type</span> Pick<span class="token punctuation">,</span> U <span class="token keyword">extends</span> keyof T<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span>P in U<span class="token punctuation">]</span><span class="token operator">:</span> T<span class="token punctuation">[</span>P<span class="token punctuation">]</span> <span class="token punctuation">}</span>
<span class="token keyword">type</span> PickPerson <span class="token operator">=</span> Pick<span class="token operator">&lt;</span>Person<span class="token punctuation">,</span> <span class="token char">'name'</span> <span class="token operator">|</span> <span class="token char">'age'</span><span class="token operator">&gt;</span>
复制代码
</code></pre></div><blockquote><p>在已有类型中挑选所需属性</p></blockquote> <h2 id="五-record记录类型"><a href="#五-record记录类型" class="header-anchor">#</a> 五.Record记录类型</h2> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">type</span> Record <span class="token keyword">extends</span> keyof any<span class="token punctuation">,</span> T<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span>P in K<span class="token punctuation">]</span>  <span class="token operator">:</span> T <span class="token punctuation">}</span>
let person<span class="token operator">:</span> Record <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token char">'zf'</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">11</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
复制代码
</code></pre></div><p>实现map方法，我们经常用record类型表示映射类型</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">function</span> mapextends <span class="token keyword">keyof</span> <span class="token builtin">any</span><span class="token punctuation">,</span> <span class="token constant">K</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>obj<span class="token operator">:</span> Record<span class="token punctuation">,</span> <span class="token function-variable function">callback</span><span class="token operator">:</span> <span class="token punctuation">(</span>item<span class="token operator">:</span> <span class="token constant">K</span><span class="token punctuation">,</span> key<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token constant">U</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token keyword">as</span> Record
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        result<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">callback</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">,</span> key<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> result
<span class="token punctuation">}</span>
<span class="token keyword">const</span> r <span class="token operator">=</span> <span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">'zf'</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">11</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>item<span class="token punctuation">,</span> key<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> item
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
复制代码
</code></pre></div><h2 id="六-omit忽略属性"><a href="#六-omit忽略属性" class="header-anchor">#</a> 六.Omit忽略属性</h2> <div class="language-scala extra-class"><pre class="language-scala"><code>let person <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token char">'wj'</span><span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token number">11</span><span class="token punctuation">,</span>
    address<span class="token operator">:</span> <span class="token char">'回龙观'</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> Omit<span class="token punctuation">,</span> K <span class="token keyword">extends</span> keyof T<span class="token operator">&gt;</span> <span class="token operator">=</span> Pick<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token class-name">ExcludeT</span><span class="token punctuation">,</span> <span class="token class-name">K</span><span class="token punctuation">&gt;</span></span><span class="token operator">&gt;</span>
<span class="token keyword">type</span> OmitAddress <span class="token operator">=</span> Omit
复制代码
</code></pre></div><blockquote><p>忽略person中的address属性 (先排除掉不需要的key，在通过key选出需要的属性)</p></blockquote> <h1 id="_14-装包和拆包"><a href="#_14-装包和拆包" class="header-anchor">#</a> 14.装包和拆包</h1> <h2 id="一-装包"><a href="#一-装包" class="header-anchor">#</a> 一.装包</h2> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">Proxy</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token constant">T</span><span class="token punctuation">,</span>
    <span class="token function">set</span><span class="token punctuation">(</span>value<span class="token operator">:</span><span class="token constant">T</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">void</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> <span class="token class-name">Proxify</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">:</span> Proxy
<span class="token punctuation">}</span> 
<span class="token keyword">let</span> props <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'wj'</span><span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token number">11</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">proxify</span><span class="token punctuation">(</span>obj<span class="token operator">:</span><span class="token constant">T</span><span class="token punctuation">)</span><span class="token operator">:</span>Proxify<span class="token punctuation">{</span>
    <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token keyword">as</span> Proxify<span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> obj<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">let</span> value <span class="token operator">=</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
        result<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">return</span> value
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token function-variable function">set</span><span class="token operator">:</span><span class="token punctuation">(</span>newValue<span class="token punctuation">)</span><span class="token operator">=&gt;</span>value <span class="token operator">=</span> newValue
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> result
<span class="token punctuation">}</span>
<span class="token keyword">let</span> proxpProps <span class="token operator">=</span> <span class="token function">proxify</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
复制代码
</code></pre></div><h2 id="二-拆包"><a href="#二-拆包" class="header-anchor">#</a> 二.拆包</h2> <div class="language-vbnet extra-class"><pre class="language-vbnet"><code><span class="token keyword">function</span> unProxify<span class="token punctuation">(</span>proxpProps<span class="token punctuation">:</span>Proxify<span class="token punctuation">)</span><span class="token punctuation">:</span>T<span class="token punctuation">{</span>
    <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token keyword">as</span> T<span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> <span class="token keyword">key</span> <span class="token keyword">in</span> proxpProps<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">let</span> value <span class="token operator">=</span> proxpProps[<span class="token keyword">key</span>]<span class="token punctuation">;</span>
        result[<span class="token keyword">key</span>] <span class="token operator">=</span> value.<span class="token keyword">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> result
<span class="token punctuation">}</span>
<span class="token keyword">let</span> proxy <span class="token operator">=</span> unProxify<span class="token punctuation">(</span>proxpProps<span class="token punctuation">)</span>

复制代码
</code></pre></div><h1 id="_15-自定义类型"><a href="#_15-自定义类型" class="header-anchor">#</a> 15.自定义类型</h1> <h2 id="一-diff实现"><a href="#一-diff实现" class="header-anchor">#</a> 一.Diff实现</h2> <p>求两个对象不同的部分</p> <div class="language-scala extra-class"><pre class="language-scala"><code>let person1 <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token char">'wj'</span><span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token number">11</span><span class="token punctuation">,</span>
    address<span class="token operator">:</span> <span class="token char">'回龙观'</span>
<span class="token punctuation">}</span>
let person2 <span class="token operator">=</span> <span class="token punctuation">{</span>
    address<span class="token operator">:</span> <span class="token char">'回龙观'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> Diff <span class="token keyword">extends</span> <span class="token keyword">object</span><span class="token punctuation">,</span>K <span class="token keyword">extends</span> Object<span class="token operator">&gt;</span> <span class="token operator">=</span> Omit<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">,</span>keyof <span class="token class-name">K</span><span class="token punctuation">&gt;</span></span>
<span class="token keyword">type</span> DiffPerson <span class="token operator">=</span> Diff
复制代码
</code></pre></div><h2 id="二-intersection交集"><a href="#二-intersection交集" class="header-anchor">#</a> 二.InterSection交集</h2> <div class="language-scala extra-class"><pre class="language-scala"><code>let person1 <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token char">'wj'</span><span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token number">11</span><span class="token punctuation">,</span>
    address<span class="token operator">:</span> <span class="token char">'回龙观'</span>
<span class="token punctuation">}</span>
let person2 <span class="token operator">=</span> <span class="token punctuation">{</span>
    address<span class="token operator">:</span> <span class="token char">'回龙观'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> InterSection <span class="token keyword">extends</span> <span class="token keyword">object</span><span class="token punctuation">,</span> K <span class="token keyword">extends</span> <span class="token keyword">object</span><span class="token operator">&gt;</span> <span class="token operator">=</span> Pick<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token class-name">ExtractT</span><span class="token punctuation">,</span> keyof <span class="token class-name">K</span><span class="token punctuation">&gt;</span></span><span class="token operator">&gt;</span>
<span class="token keyword">type</span> InterSectionPerson <span class="token operator">=</span> InterSection
复制代码
</code></pre></div><h2 id="三-overwrite属性覆盖"><a href="#三-overwrite属性覆盖" class="header-anchor">#</a> 三.Overwrite属性覆盖</h2> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">type</span> OldProps <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> string<span class="token punctuation">,</span> age<span class="token operator">:</span> number<span class="token punctuation">,</span> visible<span class="token operator">:</span> boolean <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> NewProps <span class="token operator">=</span> <span class="token punctuation">{</span> age<span class="token operator">:</span> string<span class="token punctuation">,</span> other<span class="token operator">:</span> string <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> Diff <span class="token keyword">extends</span> <span class="token keyword">object</span><span class="token punctuation">,</span>K <span class="token keyword">extends</span> Object<span class="token operator">&gt;</span> <span class="token operator">=</span> Omit<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">,</span>keyof <span class="token class-name">K</span><span class="token punctuation">&gt;</span></span>
<span class="token keyword">type</span> InterSection <span class="token keyword">extends</span> <span class="token keyword">object</span><span class="token punctuation">,</span> K <span class="token keyword">extends</span> <span class="token keyword">object</span><span class="token operator">&gt;</span> <span class="token operator">=</span> Pick<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token class-name">ExtractT</span><span class="token punctuation">,</span> keyof <span class="token class-name">K</span><span class="token punctuation">&gt;</span></span><span class="token operator">&gt;</span>
<span class="token keyword">type</span> Overwrite <span class="token keyword">extends</span> <span class="token keyword">object</span><span class="token punctuation">,</span> K <span class="token keyword">extends</span> <span class="token keyword">object</span><span class="token punctuation">,</span> I <span class="token operator">=</span> Diff<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">,</span><span class="token class-name">K</span><span class="token punctuation">&gt;</span></span> <span class="token operator">&amp;</span> InterSection<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span><span class="token operator">&gt;</span> <span class="token operator">=</span> Pick<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">I</span><span class="token punctuation">,</span>keyof <span class="token class-name">I</span><span class="token punctuation">&gt;</span></span>
<span class="token keyword">type</span> ReplaceProps <span class="token operator">=</span> Overwrite<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">OldProps</span><span class="token punctuation">,</span> <span class="token class-name">NewProps</span><span class="token punctuation">&gt;</span></span>
复制代码
</code></pre></div><blockquote><p>如果存在已有属性则使用新属性类型进行覆盖操作</p></blockquote> <h2 id="四-merge对象合并"><a href="#四-merge对象合并" class="header-anchor">#</a> 四.Merge对象合并</h2> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">type</span> Compute <span class="token keyword">extends</span> any<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span>K in keyof A<span class="token punctuation">]</span><span class="token operator">:</span> A<span class="token punctuation">[</span>K<span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> Merge<span class="token punctuation">,</span> K<span class="token operator">&gt;</span> <span class="token operator">=</span> Compute<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Omit</span><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">,</span> keyof <span class="token class-name">K</span><span class="token punctuation">&gt;</span> <span class="token operator">&amp;</span> <span class="token class-name">K</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span>
<span class="token keyword">type</span> MergeObj <span class="token operator">=</span> Merge<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">OldProps</span><span class="token punctuation">,</span><span class="token class-name">NewProps</span><span class="token punctuation">&gt;</span></span>
复制代码
</code></pre></div><blockquote><p>将两个对象类型进行合并操作</p></blockquote> <h1 id="_16-unknown"><a href="#_16-unknown" class="header-anchor">#</a> 16.unknown</h1> <h2 id="一-unknown类型"><a href="#一-unknown类型" class="header-anchor">#</a> 一.unknown类型</h2> <p><code>unknown</code>类型，任何类型都可以赋值为<code>unknown</code>类型。 它是 any 类型对应的安全类型</p> <div class="language-ini extra-class"><pre class="language-ini"><code>let unknown:unknown;
<span class="token key attr-name">unknown</span> <span class="token punctuation">=</span> <span class="token value attr-value">'zf';</span>
<span class="token key attr-name">unknown</span> <span class="token punctuation">=</span> <span class="token value attr-value">11;</span>
复制代码
</code></pre></div><blockquote><p>不能访问unknown类型上的属性，不能作为函数、类来使用</p></blockquote> <ul><li><p>联合类型中的<code>unknown</code></p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">UnionUnknown</span> <span class="token operator">=</span> <span class="token builtin">unknown</span> <span class="token operator">|</span> <span class="token keyword">null</span> <span class="token operator">|</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span>
复制代码
</code></pre></div><blockquote><p>联合类型与<code>unknown</code>都是<code>unknown</code>类型</p></blockquote></li> <li><p>交叉类型中的<code>unknown</code></p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">inter</span> <span class="token operator">=</span> <span class="token builtin">unknown</span> <span class="token operator">&amp;</span> <span class="token keyword">null</span>
复制代码
</code></pre></div><blockquote><p>交叉类型与<code>unknown</code>都是其他类型</p></blockquote></li></ul> <h2 id="二-unknown特性"><a href="#二-unknown特性" class="header-anchor">#</a> 二.unknown特性</h2> <ul><li><p>never是unknown的子类型</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">isNever</span> <span class="token operator">=</span> <span class="token builtin">never</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">unknown</span></span> <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">;</span><span class="token operator">=</span>
复制代码
</code></pre></div></li> <li><p>keyof unknown 是never</p> <div class="language-ini extra-class"><pre class="language-ini"><code><span class="token key attr-name">type key</span> <span class="token punctuation">=</span> <span class="token value attr-value">keyof unknown;</span>
复制代码
</code></pre></div></li> <li><p>unknown类型不能被遍历</p> <div class="language-ini extra-class"><pre class="language-ini"><code><span class="token key attr-name">type IMap</span> <span class="token punctuation">=</span> <span class="token value attr-value">{</span>
    <span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">P in keyof T</span><span class="token punctuation">]</span></span>:number
}
<span class="token key attr-name">type t</span> <span class="token punctuation">=</span> <span class="token value attr-value">IMap;</span>
复制代码
</code></pre></div></li></ul> <blockquote><p>unknown类型不能和number类型进行 <code>+</code>运算,可以用于等或不等操作</p></blockquote> <h1 id="_17-模块和命名空间"><a href="#_17-模块和命名空间" class="header-anchor">#</a> 17.模块和命名空间</h1> <blockquote><p>默认情况下 ,我们编写的代码处于全局命名空间中</p></blockquote> <h2 id="一-模块"><a href="#一-模块" class="header-anchor">#</a> 一.模块</h2> <p>文件模块： 如果在你的 TypeScript 文件的根级别位置含有 import 或者 export，那么它会在这个文件中创建一个本地的作用域 。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// a.ts导出</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token string">'zf'</span>

<span class="token comment">// index.ts导入</span>
<span class="token keyword">import</span> name <span class="token keyword">from</span> <span class="token string">'./a'</span>
复制代码
</code></pre></div><h2 id="二-命名空间"><a href="#二-命名空间" class="header-anchor">#</a> 二.命名空间</h2> <blockquote><p>命名空间可以用于组织代码，避免文件内命名冲突</p></blockquote> <ul><li><p>命名空间的使用</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">namespace</span> zoo <span class="token punctuation">{</span>
    <span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token punctuation">{</span> <span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'zoo dog'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">namespace</span> home <span class="token punctuation">{</span>
    <span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token punctuation">{</span> <span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'home dog'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> dog_of_zoo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">zoo</span><span class="token punctuation">.</span><span class="token function">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
dog_of_zoo<span class="token punctuation">.</span><span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> dog_of_home <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">home</span><span class="token punctuation">.</span><span class="token function">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
dog_of_home<span class="token punctuation">.</span><span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
复制代码
</code></pre></div></li> <li><p>命名空间嵌套使用</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">namespace</span> zoo <span class="token punctuation">{</span>
    <span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token punctuation">{</span> <span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'zoo dog'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
    <span class="token keyword">export</span> <span class="token keyword">namespace</span> bear<span class="token punctuation">{</span>
        <span class="token keyword">export</span> <span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token string">'熊'</span>
    <span class="token punctuation">}</span> 
<span class="token punctuation">}</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>zoo<span class="token punctuation">.</span>bear<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> 
复制代码
</code></pre></div></li></ul> <blockquote><p>命名空间中导出的变量可以通过命名空间使用。</p></blockquote> <h1 id="_18-类型声明"><a href="#_18-类型声明" class="header-anchor">#</a> 18.类型声明</h1> <h2 id="一-声明全局变量"><a href="#一-声明全局变量" class="header-anchor">#</a> 一.声明全局变量</h2> <ul><li>普通类型声明</li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">declare</span> <span class="token keyword">let</span> age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span>a<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> b<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token keyword">declare</span> <span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">declare</span> <span class="token keyword">const</span> <span class="token keyword">enum</span> Seaons<span class="token punctuation">{</span>
    Spring<span class="token punctuation">,</span>
    Summer<span class="token punctuation">,</span>
    Autumn<span class="token punctuation">,</span>
    Winter
<span class="token punctuation">}</span>
<span class="token keyword">declare</span> <span class="token keyword">interface</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">,</span>
    age<span class="token operator">:</span><span class="token builtin">number</span>
<span class="token punctuation">}</span>
复制代码
</code></pre></div><blockquote><p>类型声明在编译的时候都会被删除，不会影响真正的代码。目的是不重构原有的js代码，而且可以得到很好的TS支持</p></blockquote> <p>练习: 声明jQuery类型</p> <p>jquery通过外部CDN方式引入，想在代码中直接使用</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">declare</span> <span class="token keyword">const</span> <span class="token function-variable function">$</span><span class="token operator">:</span><span class="token punctuation">(</span>selector<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token function">height</span><span class="token punctuation">(</span>num<span class="token operator">?</span><span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">void</span>
    <span class="token function">width</span><span class="token punctuation">(</span>num<span class="token operator">?</span><span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">void</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">height</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
复制代码
</code></pre></div><ul><li>命名空间声明</li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">declare</span> <span class="token keyword">namespace</span> jQuery <span class="token punctuation">{</span>
    <span class="token keyword">function</span> <span class="token function">ajax</span><span class="token punctuation">(</span>url<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">,</span>otpions<span class="token operator">:</span>object<span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">void</span><span class="token punctuation">;</span>
    <span class="token keyword">namespace</span> fn <span class="token punctuation">{</span>
        <span class="token keyword">function</span> <span class="token function">extend</span><span class="token punctuation">(</span>obj<span class="token operator">:</span>object<span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">void</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
jQuery<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
复制代码
</code></pre></div><blockquote><p><code>namespace</code>表示一个全局变量包含很多子属性 , 命名空间内部不需要使用 declare 声明属性或方法</p></blockquote> <h2 id="二-类型声明文件"><a href="#二-类型声明文件" class="header-anchor">#</a> 二. 类型声明文件</h2> <blockquote><p>类型声明文件以<code>.d.ts</code>结尾。默认在项目编译时会查找所有以<code>.d.ts</code>结尾的文件</p></blockquote> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// jquery.d.ts</span>
<span class="token keyword">declare</span> <span class="token keyword">const</span> <span class="token function-variable function">$</span><span class="token operator">:</span><span class="token punctuation">(</span>selector<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token function">height</span><span class="token punctuation">(</span>num<span class="token operator">?</span><span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">void</span>
    <span class="token function">width</span><span class="token punctuation">(</span>num<span class="token operator">?</span><span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">void</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">declare</span> <span class="token keyword">namespace</span> jQuery <span class="token punctuation">{</span>
    <span class="token keyword">function</span> <span class="token function">ajax</span><span class="token punctuation">(</span>url<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">,</span>otpions<span class="token operator">:</span>object<span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">void</span><span class="token punctuation">;</span>
    <span class="token keyword">namespace</span> fn <span class="token punctuation">{</span>
        <span class="token keyword">function</span> <span class="token function">extend</span><span class="token punctuation">(</span>obj<span class="token operator">:</span>object<span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">void</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
复制代码
</code></pre></div><h2 id="三-编写第三方声明文件"><a href="#三-编写第三方声明文件" class="header-anchor">#</a> 三.编写第三方声明文件</h2> <p>配置<code>tsconfig.json</code></p> <ul><li>jquery声明文件</li></ul> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;moduleResolution&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node&quot;</span><span class="token punctuation">,</span>
<span class="token property">&quot;baseUrl&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./&quot;</span><span class="token punctuation">,</span>
<span class="token property">&quot;paths&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;*&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;types/*&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
复制代码
</code></pre></div><div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// types/jquery/index.d.ts</span>

<span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token function">jQuery</span><span class="token punctuation">(</span>selector<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> HTMLElement<span class="token punctuation">;</span>
<span class="token keyword">declare</span> <span class="token keyword">namespace</span> jQuery <span class="token punctuation">{</span>
    <span class="token keyword">function</span> <span class="token function">ajax</span><span class="token punctuation">(</span>url<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token operator">=</span> jQuery<span class="token punctuation">;</span>
复制代码
</code></pre></div><ul><li>events模块声明文件</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> EventEmitter <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;zf-events&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> e <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EventEmitter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
e<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'message'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">text</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
e<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'message'</span><span class="token punctuation">,</span> <span class="token string">'hello'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
复制代码
</code></pre></div><div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">type</span> <span class="token class-name">Listener</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">type</span> <span class="token class-name">Type</span> <span class="token operator">=</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">symbol</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">EventEmitter</span> <span class="token punctuation">{</span>
   <span class="token keyword">static</span> defaultMaxListeners<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
   <span class="token function">emit</span><span class="token punctuation">(</span>type<span class="token operator">:</span> Type<span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
   <span class="token function">addListener</span><span class="token punctuation">(</span>type<span class="token operator">:</span> Type<span class="token punctuation">,</span> listener<span class="token operator">:</span> Listener<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
   <span class="token function">on</span><span class="token punctuation">(</span>type<span class="token operator">:</span> Type<span class="token punctuation">,</span> listener<span class="token operator">:</span> Listener<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
   <span class="token function">once</span><span class="token punctuation">(</span>type<span class="token operator">:</span> Type<span class="token punctuation">,</span> listener<span class="token operator">:</span> Listener<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
复制代码
</code></pre></div><h2 id="四-模块导入导出"><a href="#四-模块导入导出" class="header-anchor">#</a> 四.模块导入导出</h2> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> $ <span class="token keyword">from</span> <span class="token string">'jquery'</span>  <span class="token comment">// 只适用于 export default $</span>

<span class="token keyword">const</span> $ <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'jquery'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 没有声明文件可以直接使用 require语法</span>

<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> $ <span class="token keyword">from</span> <span class="token string">'jquery'</span>  <span class="token comment">// 为了支持 Commonjs规范 和 AMD规范 导出时采用export = jquery</span>

<span class="token keyword">import</span> $ <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'jquery'</span><span class="token punctuation">)</span>  <span class="token comment">// export = jquery 在commonjs规范中使用</span>
复制代码
</code></pre></div><h2 id="五-第三方声明文件"><a href="#五-第三方声明文件" class="header-anchor">#</a> 五.第三方声明文件</h2> <p>@types是一个约定的前缀，所有的第三方声明的类型库都会带有这样的前缀</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> @types/jquery <span class="token parameter variable">-S</span>
复制代码
</code></pre></div><blockquote><p>当使用jquery时默认会查找 <code>node_modules/@types/jquery/index.d.ts</code> 文件</p></blockquote> <h3 id="查找规范"><a href="#查找规范" class="header-anchor">#</a> 查找规范</h3> <ul><li>node_modules/jquery/package.json 中的types字段</li> <li>node_modules/jquery/index.d.ts</li> <li>node_modules/@types/jquery/index.d.ts</li></ul> <h1 id="_19-扩展全局变量类型"><a href="#_19-扩展全局变量类型" class="header-anchor">#</a> 19.扩展全局变量类型</h1> <h2 id="一-扩展局部变量"><a href="#一-扩展局部变量" class="header-anchor">#</a> 一.扩展局部变量</h2> <blockquote><p>可以直接使用接口对已有类型进行扩展</p></blockquote> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">String</span> <span class="token punctuation">{</span>
    <span class="token function">double</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token builtin">string</span>
<span class="token punctuation">}</span>
String<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">double</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span> <span class="token keyword">as</span> <span class="token builtin">string</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">'wj'</span><span class="token punctuation">;</span>
复制代码
</code></pre></div><div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Window</span> <span class="token punctuation">{</span>
    mynane<span class="token operator">:</span><span class="token builtin">string</span>
<span class="token punctuation">}</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>mynane<span class="token punctuation">)</span>
复制代码
</code></pre></div><h2 id="二-模块内全局扩展"><a href="#二-模块内全局扩展" class="header-anchor">#</a> 二.模块内全局扩展</h2> <div class="language-vbnet extra-class"><pre class="language-vbnet"><code><span class="token keyword">declare</span> <span class="token keyword">global</span><span class="token punctuation">{</span>
    <span class="token keyword">interface</span> <span class="token keyword">String</span> <span class="token punctuation">{</span>
        <span class="token keyword">double</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token keyword">string</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">interface</span> <span class="token function">Window</span><span class="token punctuation">{</span>
        myname<span class="token punctuation">:</span><span class="token keyword">string</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
复制代码
</code></pre></div><blockquote><p>声明全局表示对全局进行扩展</p></blockquote> <h2 id="三-声明合并"><a href="#三-声明合并" class="header-anchor">#</a> 三.声明合并</h2> <p>同一名称的两个独立声明会被合并成一个单一声明，合并后的声明拥有原先两个声明的特性。</p> <h3 id="_1-同名接口合并"><a href="#_1-同名接口合并" class="header-anchor">#</a> 1.同名接口合并</h3> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">interface Animal</span> <span class="token punctuation">{</span>
    <span class="token property">name</span><span class="token punctuation">:</span>string
<span class="token punctuation">}</span>
<span class="token selector">interface Animal</span> <span class="token punctuation">{</span>
    <span class="token property">age</span><span class="token punctuation">:</span>number
<span class="token punctuation">}</span>
<span class="token selector">let a:Animal =</span> <span class="token punctuation">{</span><span class="token property">name</span><span class="token punctuation">:</span><span class="token string">'zf'</span><span class="token punctuation">,</span><span class="token property">age</span><span class="token punctuation">:</span>10<span class="token punctuation">}</span><span class="token punctuation">;</span>
复制代码
</code></pre></div><h2 id="_2-命名空间的合并"><a href="#_2-命名空间的合并" class="header-anchor">#</a> 2.命名空间的合并</h2> <ul><li><p>扩展类</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">Form</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">namespace</span> Form <span class="token punctuation">{</span>
    <span class="token keyword">export</span> <span class="token keyword">const</span> type <span class="token operator">=</span> <span class="token string">'form'</span>
<span class="token punctuation">}</span>
复制代码
</code></pre></div></li> <li><p>扩展方法</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">namespace</span> getName <span class="token punctuation">{</span>
    <span class="token keyword">export</span> <span class="token keyword">const</span> type <span class="token operator">=</span> <span class="token string">'form'</span>
<span class="token punctuation">}</span>
复制代码
</code></pre></div></li> <li><p>扩展枚举类型</p> <div class="language-ini extra-class"><pre class="language-ini"><code>enum Seasons {
    <span class="token key attr-name">Spring</span> <span class="token punctuation">=</span> <span class="token value attr-value">'Spring',</span>
    <span class="token key attr-name">Summer</span> <span class="token punctuation">=</span> <span class="token value attr-value">'<span class="token inner-value">Summer</span>'</span>
}
namespace Seasons{
    <span class="token key attr-name">export let Autum</span> <span class="token punctuation">=</span> <span class="token value attr-value">'Autum';</span>
    <span class="token key attr-name">export let Winter</span> <span class="token punctuation">=</span> <span class="token value attr-value">'<span class="token inner-value">Winter</span>'</span>
}
复制代码
</code></pre></div></li></ul> <h2 id="_3-交叉类型合并"><a href="#_3-交叉类型合并" class="header-anchor">#</a> 3.交叉类型合并</h2> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createStore<span class="token punctuation">,</span> Store <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'redux'</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name">StoreWithExt</span> <span class="token operator">=</span> Store <span class="token operator">&amp;</span> <span class="token punctuation">{</span>
    ext<span class="token operator">:</span><span class="token builtin">string</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> store<span class="token operator">:</span>StoreWithExt
复制代码
</code></pre></div><h2 id="四-生成声明文件"><a href="#四-生成声明文件" class="header-anchor">#</a> 四.生成声明文件</h2> <blockquote><p>配置<code>tsconfig.json</code> 为true 生成声明文件</p></blockquote> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;declaration&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
复制代码
</code></pre></div><h1 id="完结撒花"><a href="#完结撒花" class="header-anchor">#</a> 完结撒花</h1> <p>以上就是 <code>TypeScript</code> 基础的全部啦，掌握了这些对于面试已经是绰绰有余，不过对于语言来说还是需要多加练习哟。欢迎点赞收藏 ！</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/tutorial/ts/1_第一部分.html" class="prev">
        1 第一部分
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/tutorial/assets/js/app.376ad10f.js" defer></script><script src="/tutorial/assets/js/3.8ea4ef0d.js" defer></script><script src="/tutorial/assets/js/53.2c68231e.js" defer></script>
  </body>
</html>
